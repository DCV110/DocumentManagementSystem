@{
    ViewData["Title"] = "Thư viện tài liệu";
    // Use appropriate layout based on user role
    var isStudent = ViewBag.IsStudent != null ? (bool)ViewBag.IsStudent : User.IsInRole("Student");
    Layout = isStudent ? "_DashboardLayout" : "_SidebarLayout";
}

@using Microsoft.AspNetCore.Identity
@inject UserManager<ApplicationUser> UserManager

@if (!isStudent)
{
    // Render appropriate sidebar for Instructor or Admin
    if (User.IsInRole("Admin"))
    {
        <partial name="_AdminSidebar" />
    }
    else if (User.IsInRole("Instructor"))
    {
        <partial name="_InstructorSidebar" />
    }
}

@if (isStudent)
{
    <div class="dashboard-header">
    <div class="header-left">
        <div class="logo-icon">
            <span class="material-symbols-outlined icon-fill">school</span>
        </div>
        <h2 class="header-title">Academic DMS</h2>
    </div>
    <div class="header-nav">
        <a href="@Url.Action("StudentDashboard", "Home")" class="nav-link">Tổng quan</a>
        <a href="@Url.Action("Library", "Document")" class="nav-link active">Thư viện tài liệu</a>
        <a href="@Url.Action("Search", "Document")" class="nav-link">Tìm kiếm</a>
        <a href="@Url.Action("MyCourses", "Home")" class="nav-link">Khóa học của tôi</a>
        <a href="@Url.Action("Schedule", "Home")" class="nav-link">Lịch biểu</a>
    </div>
    <div class="header-actions">
        <button class="notification-btn">
            <span class="material-symbols-outlined">notifications</span>
            <span class="notification-badge"></span>
        </button>
        <button class="settings-btn">
            <span class="material-symbols-outlined">settings</span>
        </button>
        <div class="user-menu">
            <button class="avatar-btn" id="avatarBtn" style="background-image: url('https://ui-avatars.com/api/?name=@UserManager.GetUserName(User)&background=1e40af&color=fff')"></button>
            <div class="user-dropdown" id="userDropdown">
                <div class="dropdown-header">
                    <div class="dropdown-avatar" style="background-image: url('https://ui-avatars.com/api/?name=@UserManager.GetUserName(User)&background=1e40af&color=fff')"></div>
                    <div class="dropdown-user-info">
                        <div class="dropdown-name">@UserManager.GetUserName(User)</div>
                        <div class="dropdown-role">Sinh viên</div>
                    </div>
                </div>
                <div class="dropdown-divider"></div>
                <form asp-controller="Account" asp-action="Logout" method="post" class="logout-form-inline">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="dropdown-item logout-item">
                        <span class="material-symbols-outlined">logout</span>
                        <span>Đăng xuất</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
}

@if (isStudent)
{
<main class="dashboard-main">
    <div class="dashboard-title-section">
        <div>
            <h1 class="dashboard-title">Thư viện tài liệu</h1>
            <p class="dashboard-subtitle">Tìm kiếm và tải xuống tài liệu học tập</p>
        </div>
    </div>

    <!-- Documents Section -->
    <div class="documents-section">
        <div class="section-header">
            <div>
                <h2 class="section-title">Documents</h2>
                <p class="section-subtitle">Manage documents shared by colleagues, professors, and students.</p>
            </div>
        </div>

        <!-- Filters and Search -->
        <div class="filters-row">
            <div class="search-box-container">
                <form method="get" action="@Url.Action("Library", "Document")" class="search-form">
                    @if (ViewBag.CourseId != null)
                    {
                        <input type="hidden" name="courseId" value="@ViewBag.CourseId" />
                    }
                    @if (ViewBag.SortBy != null)
                    {
                        <input type="hidden" name="sortBy" value="@ViewBag.SortBy" />
                    }
                    <span class="material-symbols-outlined search-icon">search</span>
                    <input type="text" name="search" class="search-input" placeholder="Tìm kiếm tài liệu..." value="@ViewBag.Search" />
                    <button type="submit" class="search-submit-btn">Tìm kiếm</button>
                </form>
            </div>
            <div class="filters-controls">
                <div class="filter-dropdown">
                    <select class="filter-select-input">
                        <option>Access Level</option>
                        <option>Can View</option>
                        <option>Can Edit</option>
                        <option>Can Comment</option>
                    </select>
                </div>
                <div class="filter-dropdown">
                    <select class="filter-select-input">
                        <option>File Type</option>
                        <option>PDF</option>
                        <option>Word</option>
                        <option>Excel</option>
                        <option>PowerPoint</option>
                    </select>
                </div>
                <div class="filter-dropdown">
                    <select class="filter-select-input">
                        <option>Date Shared</option>
                        <option>Last Week</option>
                        <option>Last Month</option>
                        <option>Last 3 Months</option>
                    </select>
                </div>
                <div class="sort-by">
                <span>Sort by: </span>
                <form method="get" action="@Url.Action("Library", "Document")" style="display: inline;">
                    @if (!string.IsNullOrEmpty(ViewBag.Search))
                    {
                        <input type="hidden" name="search" value="@ViewBag.Search" />
                    }
                    @if (ViewBag.CourseId != null)
                    {
                        <input type="hidden" name="courseId" value="@ViewBag.CourseId" />
                    }
                    <select name="sortBy" onchange="this.form.submit()" class="sort-select">
                        <option value="newest" selected="@(ViewBag.SortBy == "newest" || ViewBag.SortBy == null)">Date (Newest)</option>
                        <option value="oldest" selected="@(ViewBag.SortBy == "oldest")">Date (Oldest)</option>
                        <option value="name" selected="@(ViewBag.SortBy == "name")">Name (A-Z)</option>
                    </select>
                </form>
                </div>
            </div>
        </div>

        <!-- Documents Table -->
        <div class="documents-table-container">
            <table class="documents-table">
                <thead>
                    <tr>
                        <th>DOCUMENT NAME</th>
                        <th>SHARED BY</th>
                        <th>DATE</th>
                        <th>ACCESS</th>
                        <th>ACTIONS</th>
                    </tr>
                </thead>
                <tbody>
                    @if (ViewBag.Documents != null)
                    {
                        var documents = ViewBag.Documents as List<DMS.Models.Document>;
                        @if (documents != null && documents.Any())
                        {
                            @foreach (var doc in documents)
                            {
                                @if (doc != null)
                                {
                                    var fileSize = doc.FilePath != null ? "2.4 MB" : "N/A";
                                    var fileExtension = doc.FileName?.Split('.').LastOrDefault()?.ToLower() ?? "";
                                    var fileTypeIcon = "insert_drive_file";
                                    var fileTypeColor = "#6b7280";
                                    
                                    if (fileExtension == "pdf")
                                    {
                                        fileTypeIcon = "picture_as_pdf";
                                        fileTypeColor = "#dc2626";
                                    }
                                    else if (fileExtension == "doc" || fileExtension == "docx")
                                    {
                                        fileTypeIcon = "description";
                                        fileTypeColor = "#2563eb";
                                    }
                                    else if (fileExtension == "xls" || fileExtension == "xlsx")
                                    {
                                        fileTypeIcon = "table_chart";
                                        fileTypeColor = "#16a34a";
                                    }
                                    else if (fileExtension == "ppt" || fileExtension == "pptx")
                                    {
                                        fileTypeIcon = "slideshow";
                                        fileTypeColor = "#ea580c";
                                    }
                                    
                                    <tr>
                                        <td>
                                            <div class="document-name-cell">
                                                <span class="material-symbols-outlined file-type-icon" style="color: @fileTypeColor;">@fileTypeIcon</span>
                                                <div>
                                                    <div class="document-name">@doc.Title</div>
                                                    <div class="document-size">@fileSize</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="shared-by-cell">
                                                <div class="user-avatar-small" style="background-image: url('https://ui-avatars.com/api/?name=@(doc.User?.FullName ?? "User")&background=0959aa&color=fff')"></div>
                                                <div>
                                                    <div class="user-name">@(doc.User?.FullName ?? "Unknown")</div>
                                                    <div class="user-role">@(doc.Course?.CourseName ?? "Course")</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="date-cell">@doc.UploadDate.ToString("MMM dd, yyyy")</div>
                                        </td>
                                        <td>
                                            <span class="access-badge can-view">Can View</span>
                                        </td>
                                        <td>
                                            <div class="actions-cell">
                                                <a href="@Url.Action("Preview", "Document", new { id = doc.Id })" class="action-link" title="View">
                                                    <span class="material-symbols-outlined">visibility</span>
                                                </a>
                                                <a href="@Url.Action("Download", "Document", new { id = doc.Id })" class="action-link" title="Download">
                                                    <span class="material-symbols-outlined">download</span>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="7" class="empty-table-state">
                                    <span class="material-symbols-outlined" style="font-size: 64px; color: #9ca3af; margin-bottom: 16px;">folder_off</span>
                                    <h3>Không tìm thấy tài liệu</h3>
                                    <p>Thử thay đổi bộ lọc hoặc từ khóa tìm kiếm</p>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="7" class="empty-table-state">
                                <span class="material-symbols-outlined" style="font-size: 64px; color: #9ca3af; margin-bottom: 16px;">folder_off</span>
                                <h3>Không tìm thấy tài liệu</h3>
                                <p>Thử thay đổi bộ lọc hoặc từ khóa tìm kiếm</p>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

    <!-- Pagination -->
    @{
        var totalDocs = ViewBag.TotalDocuments ?? 0;
        var pageSize = 5;
        var currentPage = ViewBag.Page ?? 1;
        var startItem = totalDocs > 0 ? ((currentPage - 1) * pageSize) + 1 : 0;
        var endItem = Math.Min(currentPage * pageSize, totalDocs);
    }
    @if (totalDocs > 0)
    {
        <div class="pagination-wrapper">
            <div class="pagination-info">
                Showing @startItem to @endItem of @totalDocs results.
            </div>
            <div class="pagination-buttons">
                @if (currentPage > 1)
                {
                    <a href="@Url.Action("Library", "Document", new { page = currentPage - 1, search = ViewBag.Search, courseId = ViewBag.CourseId, sortBy = ViewBag.SortBy })" class="pagination-btn">
                        Previous
                    </a>
                }
                else
                {
                    <span class="pagination-btn disabled">Previous</span>
                }
                @if (currentPage < ViewBag.TotalPages)
                {
                    <a href="@Url.Action("Library", "Document", new { page = currentPage + 1, search = ViewBag.Search, courseId = ViewBag.CourseId, sortBy = ViewBag.SortBy })" class="pagination-btn">
                        Next
                    </a>
                }
                else
                {
                    <span class="pagination-btn disabled">Next</span>
                }
            </div>
        </div>
    }
</main>
}
else
{
<div class="main-content">
    <!-- Header for Instructor/Admin -->
    <div class="content-header">
        <div class="header-title-section">
            <h1>Thư viện tài liệu</h1>
            <p>Tìm kiếm và tải xuống tài liệu công khai</p>
        </div>
        <div class="header-actions">
            <button class="notification-icon">
                <span class="material-symbols-outlined">notifications</span>
                <span class="notification-dot"></span>
            </button>
        </div>
    </div>
    <!-- Content Body -->
    <div class="content-body">

    <!-- Documents Section -->
    <div class="documents-section">
        <div class="section-header">
            <div>
                <h2 class="section-title">Documents</h2>
                <p class="section-subtitle">Manage documents shared by colleagues, professors, and students.</p>
            </div>
        </div>

        <!-- Filters and Search -->
        <div class="filters-row">
            <div class="search-box-container">
                <form method="get" action="@Url.Action("Library", "Document")" class="search-form">
                    @if (ViewBag.CourseId != null)
                    {
                        <input type="hidden" name="courseId" value="@ViewBag.CourseId" />
                    }
                    @if (ViewBag.SortBy != null)
                    {
                        <input type="hidden" name="sortBy" value="@ViewBag.SortBy" />
                    }
                    <span class="material-symbols-outlined search-icon">search</span>
                    <input type="text" name="search" class="search-input" placeholder="Tìm kiếm tài liệu..." value="@ViewBag.Search" />
                    <button type="submit" class="search-submit-btn">Tìm kiếm</button>
                </form>
            </div>
            <div class="filters-controls">
                <div class="filter-dropdown">
                    <select class="filter-select-input">
                        <option>Access Level</option>
                        <option>Can View</option>
                        <option>Can Edit</option>
                        <option>Can Comment</option>
                    </select>
                </div>
                <div class="filter-dropdown">
                    <select class="filter-select-input">
                        <option>File Type</option>
                        <option>PDF</option>
                        <option>Word</option>
                        <option>Excel</option>
                        <option>PowerPoint</option>
                    </select>
                </div>
                <div class="filter-dropdown">
                    <select class="filter-select-input">
                        <option>Date Shared</option>
                        <option>Last Week</option>
                        <option>Last Month</option>
                        <option>Last 3 Months</option>
                    </select>
                </div>
                <div class="sort-by">
                <span>Sort by: </span>
                <form method="get" action="@Url.Action("Library", "Document")" style="display: inline;">
                    @if (!string.IsNullOrEmpty(ViewBag.Search))
                    {
                        <input type="hidden" name="search" value="@ViewBag.Search" />
                    }
                    @if (ViewBag.CourseId != null)
                    {
                        <input type="hidden" name="courseId" value="@ViewBag.CourseId" />
                    }
                    <select name="sortBy" onchange="this.form.submit()" class="sort-select">
                        <option value="newest" selected="@(ViewBag.SortBy == "newest" || ViewBag.SortBy == null)">Date (Newest)</option>
                        <option value="oldest" selected="@(ViewBag.SortBy == "oldest")">Date (Oldest)</option>
                        <option value="name" selected="@(ViewBag.SortBy == "name")">Name (A-Z)</option>
                    </select>
                </form>
                </div>
            </div>
        </div>

        <!-- Documents Table -->
        <div class="documents-table-container">
            <table class="documents-table">
                <thead>
                    <tr>
                        <th>DOCUMENT NAME</th>
                        <th>SHARED BY</th>
                        <th>DATE</th>
                        <th>ACCESS</th>
                        <th>ACTIONS</th>
                    </tr>
                </thead>
                <tbody>
                    @if (ViewBag.Documents != null)
                    {
                        var documents = ViewBag.Documents as List<DMS.Models.Document>;
                        @if (documents != null && documents.Any())
                        {
                            @foreach (var doc in documents)
                            {
                                @if (doc != null)
                                {
                                    var fileSize = doc.FilePath != null ? "2.4 MB" : "N/A";
                                    var fileExtension = doc.FileName?.Split('.').LastOrDefault()?.ToLower() ?? "";
                                    var fileTypeIcon = "insert_drive_file";
                                    var fileTypeColor = "#6b7280";
                                    
                                    if (fileExtension == "pdf")
                                    {
                                        fileTypeIcon = "picture_as_pdf";
                                        fileTypeColor = "#dc2626";
                                    }
                                    else if (fileExtension == "doc" || fileExtension == "docx")
                                    {
                                        fileTypeIcon = "description";
                                        fileTypeColor = "#2563eb";
                                    }
                                    else if (fileExtension == "xls" || fileExtension == "xlsx")
                                    {
                                        fileTypeIcon = "table_chart";
                                        fileTypeColor = "#16a34a";
                                    }
                                    else if (fileExtension == "ppt" || fileExtension == "pptx")
                                    {
                                        fileTypeIcon = "slideshow";
                                        fileTypeColor = "#ea580c";
                                    }
                                    
                                    <tr>
                                        <td>
                                            <div class="document-name-cell">
                                                <span class="material-symbols-outlined file-type-icon" style="color: @fileTypeColor;">@fileTypeIcon</span>
                                                <div>
                                                    <div class="document-name">@doc.Title</div>
                                                    <div class="document-size">@fileSize</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="shared-by-cell">
                                                <div class="user-avatar-small" style="background-image: url('https://ui-avatars.com/api/?name=@(doc.User?.FullName ?? "User")&background=0959aa&color=fff')"></div>
                                                <div>
                                                    <div class="user-name">@(doc.User?.FullName ?? "Unknown")</div>
                                                    <div class="user-role">@(doc.Course?.CourseName ?? "Course")</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="date-cell">@doc.UploadDate.ToString("MMM dd, yyyy")</div>
                                        </td>
                                        <td>
                                            <span class="access-badge can-view">Can View</span>
                                        </td>
                                        <td>
                                            <div class="actions-cell">
                                                <a href="@Url.Action("Preview", "Document", new { id = doc.Id })" class="action-link" title="View">
                                                    <span class="material-symbols-outlined">visibility</span>
                                                </a>
                                                <a href="@Url.Action("Download", "Document", new { id = doc.Id })" class="action-link" title="Download">
                                                    <span class="material-symbols-outlined">download</span>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="7" class="empty-table-state">
                                    <span class="material-symbols-outlined" style="font-size: 64px; color: #9ca3af; margin-bottom: 16px;">folder_off</span>
                                    <h3>Không tìm thấy tài liệu</h3>
                                    <p>Thử thay đổi bộ lọc hoặc từ khóa tìm kiếm</p>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="7" class="empty-table-state">
                                <span class="material-symbols-outlined" style="font-size: 64px; color: #9ca3af; margin-bottom: 16px;">folder_off</span>
                                <h3>Không tìm thấy tài liệu</h3>
                                <p>Thử thay đổi bộ lọc hoặc từ khóa tìm kiếm</p>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

    <!-- Pagination -->
    @{
        var totalDocs = ViewBag.TotalDocuments ?? 0;
        var pageSize = 5;
        var currentPage = ViewBag.Page ?? 1;
        var startItem = totalDocs > 0 ? ((currentPage - 1) * pageSize) + 1 : 0;
        var endItem = Math.Min(currentPage * pageSize, totalDocs);
    }
    @if (totalDocs > 0)
    {
        <div class="pagination-wrapper">
            <div class="pagination-info">
                Showing @startItem to @endItem of @totalDocs results.
            </div>
            <div class="pagination-buttons">
                @if (currentPage > 1)
                {
                    <a href="@Url.Action("Library", "Document", new { page = currentPage - 1, search = ViewBag.Search, courseId = ViewBag.CourseId, sortBy = ViewBag.SortBy })" class="pagination-btn">
                        Previous
                    </a>
                }
                else
                {
                    <span class="pagination-btn disabled">Previous</span>
                }
                @if (currentPage < ViewBag.TotalPages)
                {
                    <a href="@Url.Action("Library", "Document", new { page = currentPage + 1, search = ViewBag.Search, courseId = ViewBag.CourseId, sortBy = ViewBag.SortBy })" class="pagination-btn">
                        Next
                    </a>
                }
                else
                {
                    <span class="pagination-btn disabled">Next</span>
                }
            </div>
        </div>
    }
    </div>
    </div>
</div>
}

<style>
/* Search Box in Filters */
.search-box-container {
    width: 100%;
    margin-bottom: 16px;
}

.search-form {
    display: flex;
    align-items: center;
    gap: 8px;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 8px 12px;
    transition: all 0.2s;
}

.search-form:focus-within {
    background: white;
    border-color: #0959aa;
    box-shadow: 0 0 0 3px rgba(9, 89, 170, 0.1);
}

.search-icon {
    font-size: 20px;
    color: #6b7280;
    flex-shrink: 0;
}

.search-input {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    font-size: 14px;
    color: #111418;
    font-family: inherit;
}

.search-input::placeholder {
    color: #9ca3af;
}

.search-submit-btn {
    padding: 6px 16px;
    background: #0959aa;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.search-submit-btn:hover {
    background: #084a8f;
}

.settings-btn {
    background: none;
    border: none;
    color: #60758a;
    cursor: pointer;
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    border-radius: 6px;
}

.settings-btn:hover {
    background: #f9fafb;
    color: #0959aa;
}

/* Documents Section */
.documents-section {
    background: white;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    border: 1px solid #e5e7eb;
    margin-top: 24px;
}

.section-header {
    margin-bottom: 24px;
}

.section-title {
    font-size: 24px;
    font-weight: 700;
    color: #111418;
    margin: 0 0 8px 0;
}

.section-subtitle {
    font-size: 14px;
    color: #6b7280;
    margin: 0;
}

/* Filters Row */
.filters-row {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 24px;
}

.filters-controls {
    display: flex;
    gap: 16px;
    align-items: center;
    flex-wrap: wrap;
}

.filter-dropdown {
    position: relative;
}

.filter-select-input {
    padding: 10px 16px;
    padding-right: 40px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 14px;
    color: #111418;
    background: white;
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 20px;
    min-width: 150px;
}

.filter-select-input:focus {
    outline: none;
    border-color: #0959aa;
    box-shadow: 0 0 0 3px rgba(9, 89, 170, 0.1);
}

.sort-by {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #6b7280;
}

.sort-select {
    padding: 6px 12px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 14px;
    color: #111418;
    background: white;
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 6px center;
    background-size: 16px;
    padding-right: 30px;
}

.sort-select:focus {
    outline: none;
    border-color: #0959aa;
}

/* Documents Table */
.documents-table-container {
    overflow-x: auto;
}

.documents-table {
    width: 100%;
    border-collapse: collapse;
}

.documents-table thead {
    background: #f9fafb;
    border-bottom: 2px solid #e5e7eb;
}

.documents-table th {
    padding: 12px 16px;
    text-align: left;
    font-size: 12px;
    font-weight: 600;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.documents-table tbody tr {
    border-bottom: 1px solid #e5e7eb;
    transition: background 0.2s;
}

.documents-table tbody tr:hover {
    background: #f9fafb;
}

.documents-table td {
    padding: 16px;
    vertical-align: middle;
}

/* Document Name Cell */
.document-name-cell {
    display: flex;
    align-items: center;
    gap: 12px;
}

.file-type-icon {
    font-size: 32px;
    flex-shrink: 0;
}

.document-name {
    font-size: 15px;
    font-weight: 600;
    color: #111418;
    margin-bottom: 4px;
}

.document-size {
    font-size: 13px;
    color: #6b7280;
}

/* Shared By Cell */
.shared-by-cell {
    display: flex;
    align-items: center;
    gap: 12px;
}

.user-avatar-small {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-size: cover;
    background-position: center;
    flex-shrink: 0;
}

.user-name {
    font-size: 14px;
    font-weight: 600;
    color: #111418;
    margin-bottom: 2px;
}

.user-role {
    font-size: 12px;
    color: #6b7280;
}

/* Date Cell */
.date-cell {
    font-size: 14px;
    color: #6b7280;
}

/* Stats Cell */
.stats-cell {
    display: flex;
    align-items: center;
    color: #111418;
    font-size: 14px;
    font-weight: 500;
}

/* Access Badge */
.access-badge {
    display: inline-block;
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.access-badge.can-view {
    background: #f3f4f6;
    color: #6b7280;
}

.access-badge.can-edit {
    background: #dbeafe;
    color: #1e40af;
}

.access-badge.can-comment {
    background: #fef3c7;
    color: #d97706;
}

/* Actions Cell */
.actions-cell {
    display: flex;
    gap: 8px;
    align-items: center;
}

.action-link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 6px;
    color: #6b7280;
    text-decoration: none;
    transition: all 0.2s;
}

.action-link:hover {
    background: #f3f4f6;
    color: #0959aa;
}

.action-link .material-symbols-outlined {
    font-size: 20px;
}

/* Empty Table State */
.empty-table-state {
    text-align: center;
    padding: 64px 24px;
}

.empty-table-state h3 {
    font-size: 20px;
    font-weight: 600;
    color: #111418;
    margin: 16px 0 8px 0;
}

.empty-table-state p {
    font-size: 14px;
    color: #6b7280;
    margin: 0;
}

/* Pagination */
.pagination-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 24px;
    padding-top: 24px;
    border-top: 1px solid #e5e7eb;
}

.pagination-info {
    font-size: 14px;
    color: #6b7280;
}

.pagination-buttons {
    display: flex;
    gap: 8px;
}

.pagination-btn {
    padding: 8px 16px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    background: white;
    color: #111418;
    font-size: 14px;
    font-weight: 500;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.2s;
}

.pagination-btn:hover:not(.disabled) {
    background: #f9fafb;
    border-color: #0959aa;
    color: #0959aa;
}

.pagination-btn.disabled {
    opacity: 0.5;
    cursor: not-allowed;
}
</style>

<script>
    // User dropdown toggle
    const avatarBtn = document.getElementById('avatarBtn');
    const userDropdown = document.getElementById('userDropdown');

    if (avatarBtn && userDropdown) {
        avatarBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            userDropdown.classList.toggle('show');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!userDropdown.contains(e.target) && !avatarBtn.contains(e.target)) {
                userDropdown.classList.remove('show');
            }
        });
    }
</script>

