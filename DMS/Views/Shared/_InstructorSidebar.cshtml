@using Microsoft.AspNetCore.Identity
@inject UserManager<ApplicationUser> UserManager
@inject SignInManager<ApplicationUser> SignInManager

@{
    ApplicationUser? user = null;
    if (SignInManager.IsSignedIn(User))
    {
        user = await UserManager.GetUserAsync(User);
    }
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
}

<div class="sidebar">
    <!-- Profile Section -->
    <div class="sidebar-profile">
        <div class="profile-avatar" style="background-image: url('https://ui-avatars.com/api/?name=@(user?.FullName ?? "Giảng viên")&background=16a34a&color=fff')"></div>
        <div class="profile-info">
            <h4>@(user?.FullName ?? "Giảng viên")</h4>
            <p>@(user?.Faculty ?? "Khoa CNTT")</p>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="sidebar-nav">
        <a href="@Url.Action("InstructorDashboard", "Home")" class="nav-item @(currentAction == "InstructorDashboard" ? "active" : "")">
            <span class="material-symbols-outlined">dashboard</span>
            <span>Dashboard</span>
        </a>
        <a href="@Url.Action("MyDocuments", "Home")" class="nav-item @(currentAction == "MyDocuments" ? "active" : "")">
            <span class="material-symbols-outlined">folder</span>
            <span>Tài liệu của tôi</span>
        </a>
        <a href="@Url.Action("Upload", "Document")" class="nav-item @(currentAction == "Upload" ? "active" : "")">
            <span class="material-symbols-outlined">cloud_upload</span>
            <span>Tải lên tài liệu</span>
        </a>
        <a href="@Url.Action("Approval", "Document")" class="nav-item @(currentAction == "Approval" ? "active" : "")">
            <span class="material-symbols-outlined">pending_actions</span>
            <span>Phê duyệt</span>
        </a>
        <a href="@Url.Action("Index", "Folder")" class="nav-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "Folder" ? "active" : "")">
            <span class="material-symbols-outlined">folder_managed</span>
            <span>Quản lý thư mục</span>
        </a>
        <a href="@Url.Action("Search", "Document")" class="nav-item @(currentAction == "Search" ? "active" : "")">
            <span class="material-symbols-outlined">search</span>
            <span>Tìm kiếm</span>
        </a>
        <a href="#" class="nav-item">
            <span class="material-symbols-outlined">settings</span>
            <span>Cài đặt</span>
        </a>
    </nav>

    <!-- Footer -->
    <div class="sidebar-footer">
        <button class="theme-toggle">
            <span class="material-symbols-outlined">visibility</span>
            <span>Toggle Theme</span>
        </button>
        <form asp-controller="Account" asp-action="Logout" method="post" class="logout-form">
            @Html.AntiForgeryToken()
            <button type="submit" class="logout-btn">
                <span class="material-symbols-outlined">logout</span>
                <span>Đăng xuất</span>
            </button>
        </form>
    </div>
</div>

